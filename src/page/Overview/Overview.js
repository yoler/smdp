import React, { Component } from 'react'
import { connect } from 'react-redux'
import { withRouter } from 'react-router-dom'
import { bindActionCreators } from 'redux'
import * as actions from '../../action/action'
import styles from './Overview.css'

const data = [{
    name: '白藤街道办',
    center: {x: '480', y: '610'},
    polyline: "M697,519.1h3.83c18,18.11,36,36.09,53.82,54.21,10.46,10.59,20.66,21.43,29.33,33.54,5.1,7.14,4.85,8.42-1.91,13.39a4.05,4.05,0,0,0-1.28,1.28c-3.57,7.52-11.22,13.77-7.4,23.72.77,2.17-.64,4.08-2.68,5.23-1.28.64-2.55,1-3.44-.13-2.93-4-7.4-7.27-5.74-13.26.38-1.4,1.53-3.06.13-4.21s-3.32,0-4.72.64c-15.56,6.89-30.61,14.67-44.51,24.62h-10.2A112,112,0,0,1,675,638.22c-2.68-2.68-3.83-2.55-5.74.89s-5.23,6.63-8.16,9.69c-3.44,3.44-8.8,2.55-13.14-2.17-3.57-3.83.51-5.74,2.42-7.78,7.4-7.91,15.69-15.31,20.28-25.13a78,78,0,0,1,12.37-19.13c12.37-13.65,13.39-28.82,5.74-44.77-2.68-5.74-2.93-11-2.3-17.09C687.29,525.47,688.57,519.86,697,519.1Z"   
},{
    name: '白蕉镇',
    center: {x: '440', y: '380'},
    polyline: "M559.24,38.26c27.8,14,45.92,38.26,65.81,60.84,16.45,18.49,29.33,39.54,43.49,59.56,3.7,5.23,7.52,10.59,12.5,14.41,12.24,9.44,14.16,22.57,14.67,36.22s0,27,3.57,40.43c5.1,19.26,16.07,34.82,28.7,49.74,4.08,4.85,7.78,10.08,9.82,16.2s2.68,12-2.81,17.09c-2.68,2.55-2.68,5.48-.77,8.67a445.38,445.38,0,0,0,30.23,46.43c4,5.36,10.71,6.76,16.07,10.2,7.14,4.59,14.79,8.29,21.94,12.88,4.72,3.06,8.55,3.06,13.39.38,14.16-7.65,14.28-7.52,23.6,5.48q37.5,52.23,74.74,104.71c2.3,3.32,4.08,6.89,6.12,10.46v15.31c-5.61,10.71-14.67,17.22-25.76,21.43-3.44,1.28-6.76,2.68-10.08,4-17.47,7-24,21.3-17.6,38.9a70.12,70.12,0,0,0,13.9,24.11c4,4.34,3.7,7-.38,11-12.88,12.63-25.38,25.51-38,38.39h-3.83c-3.57-3.44-9.69-4.08-11.73-9.31-5-13.26-13.26-24.62-20.15-36.86-2-3.7-2.42-10.08-9.44-8.67-.38.13-1.28-1.53-1.79-2.42a147.51,147.51,0,0,0-19-28.44c-22.57-27.17-48.72-50.89-73.46-75.89-1.53-1.53-3.19-3.19-5.48-2.42-4.34,1.53-6.76-1-9.31-3.57-8.93-9.06-17.86-18.11-27-27a20.15,20.15,0,0,1-6.38-12.12c-3.06-19-12-34.31-27.93-45.79-6.12-4.34-13.14-8.29-17-15.18-11.1-20.15-16.58-42.6-27-63.13-4.85-9.57-7.65-20.41-9.82-31.12a18.79,18.79,0,0,0-4.46-8.29c-9.82-11.61-19.39-23.6-30.48-34.18a15,15,0,0,1-4.46-10.08c-1-11.73-2-23.34-4.85-34.69v-2.55c.77-2.55,1.79-5.23,2.42-7.78,4.08-15,9.57-29.72,20-41.45,6.5-7.27,9.95-15.56,13.14-24.36a36.29,36.29,0,0,1,2.55-6.5c7.65-12.88,7.14-26.53,4.34-40.69C566.77,90.43,558.6,69.38,552.1,48c-1.15-3.83-2.3-7.4,2.17-9.82Z"   
},{
    name: '井岸镇',
    center: {x: '371.39', y: '516.28'},
    polyline: "M563.07,334.16h11.48a10.17,10.17,0,0,1,4.21,6.76c1.4,6.38,2.17,12.88,6,18.62,4.59,6.63,7.52,14.16,10.08,21.81,7,21,14.79,41.32,35.33,54,13.14,8.16,20.79,20.79,22.32,36.73.77,8.55,5.23,15.31,11.61,21.3,7.91,7.4,15.31,15.18,23,22.83,2.17,2.17,2.68,3.83,2,7.4-1.28,6.89-4,14-1.4,21.17,1.91,5.61,4.46,11,6.63,16.45v16.58A72.22,72.22,0,0,1,683,596.13c-4.72,5.48-7.78,12-11.48,18.11-8.8,14.16-19,27.68-33.8,36.22-16.2,9.31-32.4,18.37-46.55,30.74h-1.28C578.63,665.13,567,649.44,553.76,635c-6.89-7.52-12.37-18-25.38-16.45a4,4,0,0,1-4.21-3.32c-.77-2.81.64-5,2.68-6.76,2.93-2.55,6.89-3.19,10.46-4.72,2.93-1.28,6.38-2.3,6.89-6,1-8,2.55-16.07,1.79-24-.64-7.14.26-13.39,4.34-18.62,5.1-6.38,1-14.16,4.08-20.79.13-.38-4.59-2.81-7-4.46a6.6,6.6,0,0,1-1.79-2.68c-1.91-5.36-5.74-6.89-11.1-5.87-4.34.77-8-.26-10.59-4.21-1.28-2-1.53-3.83,1.66-3.7,5.61.13,7.91-4.21,10.84-7.78,3.32-4.08,4.85-7.78-1.91-9.95-1.66-.51-2.42-2.3-3.19-3.83-2.55-5.36-5.1-10.59-9.18-15.18-2.93-3.32-3.19-6.76,1.15-9.69s5.36-7.27,2-11.48c-4.34-5.48-2.93-13.14-7.65-18.49-.77-.77-.26-2.93,0-4.34.77-2.93-.13-5.23-1.91-7.65a14.52,14.52,0,0,1,3.44-20.28c.38-.26.89-.51,1.28-.77,3.32-1.91,4.21-4.34,3.7-7.91-.77-5.23-1.4-9.95-7.52-11.86-1.79-.51-3.06-2.81-4.46-4.34v-5.1c9.31-6.63,13-18.11,22.32-24.74a8.16,8.16,0,0,0,2.93-6.76c.13-6.38,3.7-8.29,9.44-8.29C552.23,335.18,557.71,336.2,563.07,334.16Z"
},{
    name: '乾务镇',
    center: {x: '112.1', y: '581.45'},
    polyline: "M283.75,473.18h6.38c.51,8.29,2.68,10.84,8.8,9.82,1.66-.26,3.32-1,5-1.28,10.33-1.91,21-7.52,29.46,4.46,1.79,2.55,4.59,1.4,6.63-.51,1.53-1.4,3.32-3.19,5.61-1.91s1.66,3.7,1.79,5.74c.13,3.57-2.17,7.27-.26,10.71,4.21,7.52,8.55,15.18,11.1,24.11,4.34-4,8-7.4,12.75-9.44,6.38-2.68,11.35-.77,13.39,5.87,1.66,5.36,6.63,4.85,8.42,2.81,6.63-7.65,16.07-6.89,24.23-9.95,3.83-1.53,6.5,0,7.27,4.46.38,2.3.64,5.1,2.17,6.5,5,4.72,6.76,9.95,4.59,16.45-.64,1.79,0,3.44,2.55,3.32,3.83-.13,11.22-9.06,11-12.88-.38-4.85-.51-9.82-.51-14.67,0-1.53,2.17-3.19.77-4.59s-3.57-.38-5.36.13c-1.28.38-2.55,1.91-4.08.26.64-4.08,4.34-6.12,6.38-9.18,2.55-4,6.5-8.16,2.17-13-1.53-1.79-5.36-2.68-1.79-5.48,2.55-2,6.38-2.42,8.42.89,3.44,5.48,8.55,8.8,13.9,12.5-7.14,5.74-3.06,11.1.26,16.71,1.4,2.3,2.3,4.72,5.36,4.46,2.81-.13,3.7-2.55,4.59-4.72,1.66-4.46,4-8,9.06-8.93a95.47,95.47,0,0,0,19.39-6.25c4.34-1.91,6.12-.51,7.91,4,3.7,9.06,14.16,11.1,20.41,17.6.64.64,2.81-.13,4.34-.38,4.85-.64,8.8.64,11.1,5.48a8.48,8.48,0,0,0,6.12,5.23c4.21.89,4.72,2.68,2.55,6.12a5.38,5.38,0,0,0-.64,3.7c1.66,6.25-1,11.22-4.08,16.2a22.48,22.48,0,0,0-3.19,15.18c1.15,9.31-1,18.75-3.44,27.55-1.53,5.61-9.18,5.36-13.9,7.91l-.51.38c-2.3,1.4-4.21,3.19-3.7,6.12s3.44,3.06,5.61,2.93c5.48-.38,9.06,2.3,12.75,5.87,16.45,15.82,30,34.18,43.49,52.29,3.32,4.34,3.32,7-.89,10.46-16.2,13.14-21.17,32.27-27,50.89-.77,2.55-.13,5,.38,7.53,1.79,8.93,5.1,17.6,7.78,26.27.89,2.93,2,6-2.17,7.4-7.91,2.42-15.69,5.48-23.85.51-4.21-2.55-8.93-4.08-13.26-6.25a30.64,30.64,0,0,0-17.09-3.44c-11.48,1.28-22.45-.26-32-7.53a11,11,0,0,0-9.69-2c-4.08,1-6.38-.77-8-4.34-3.06-6.38-6.38-12.5-9.31-18.88-2-4.46-4.46-5.1-8.29-1.91s-7.78,6-11.61,8.93-5.61,1.28-6.5-2.81c-1.15-5.1,1.91-8.42,4.85-11.86,2.68-3.19,6.76-6.12,6.63-10.46s2.17-6.5,5.1-8.67,6.25-4.34,9.18-6.89c3.83-3.32,6.89-3.19,10.33.64,3.83,4.21,8.16,8,12.12,12.12,3.32,3.32,6.63,2.55,9.69,0,3.19-2.81.13-5.1-1.4-7-4.34-5.48-8.93-10.84-13.26-16.2-2-2.42-4.34-3.57-7.14-1.79-5.87,3.57-9.57-.13-13.39-3.57s-1.15-7,0-10.46a14.24,14.24,0,0,1,7-7.91A17.71,17.71,0,0,0,465,656.71c1.15-4.08,2.55-8,4-12.12,1.28-3.57,1-5.87-3.32-7.14-4.85-1.4-5.74-5.1-3.32-9.57,2.55-4.72,6.12-5.23,10.71-3.32,2.42.89,5.1,1,7.14-1,1.4-1.4.77-3.19-.13-4.72-1.79-2.68-4.34-2.3-6.89-1.53-4.21,1.28-8.29,1.91-11.86-1.79a6.87,6.87,0,0,0-4.08-1.4c-9.44-1-27.42,10.33-31.12,19.26-1.79,4.34-4,8.29-9.82,4.34-2.68-1.79-5.74-.77-8.55.38-13.39,5.87-26.91,11.73-40.18,17.73a7.76,7.76,0,0,0-3.83,3.19c-2.17,5-6,7.53-10.71,9.31-2.42.89-5,2.55-3.06,5.74,6.63,10.33,1.53,14.41-7.52,18.37-3.32,1.4-3.83,2.93-3.32,6.25,1.66,9.31-1.79,14.16-10.71,16.33a22.07,22.07,0,0,0-6.38,2.81c-14.41,8.67-29,17.09-42.85,26.4-5.1,3.44-10.71,7.53-13,13.65-2.93,7.78-3.83,8.67-12.12,9.18-4.46.26-7.65-4-10.84-3.44-4.21.64-3.06,8.16-7,9.69-5.23,2-5.87,6-7,10.33H217.43c-.26-4.21,1.79-9.44-3.06-12.24s-4.08-6.12-2.81-10.33c4.21-13.14,8.16-26.4,12.24-39.54,1.15-3.7,1.66-7.4-2.68-9.31-7.4-3.19-7.14-8.16-5.48-15,8.16-32.78,12.24-65.81,5.36-99.36-3.57-17.6-7.91-35.07-9.44-53.06-.77-8.8.13-17.86-3.06-26.4V492.82c3.19-2.81,4.08-8,8.42-9.31,5-1.4,7,4.59,10.84,5.36,6.38,1.28,6.5,5,5.74,9.69-.38,2.3-1.15,5,1.79,6,2.55,1,4.46-.89,6-2.68,2.93-3.06,5.23-6.89,9.57-8.16C263.73,489.76,273.29,480.71,283.75,473.18Z"
},{
    name: '斗门镇',
    center: {x: '220.51', y: '386.31'},
    polyline: "M435.53,545.88h-6.38c-1.28-4.72,2.42-9.18.38-14.41-1.28-3.19-4.34-4.46-5.48-7.52-3.83-10.08-4-9.95-14.16-7.14-2,.51-4.08,1.28-6.12,1.79-3.83.89-7.52,1.28-9.95,5.61-2,3.7-9.57,1.4-10.84-2.93-1.79-5.87-5.48-7.78-11-5.36a47.43,47.43,0,0,0-11.61,7.78c-2.55,2.3-4.21,3.83-4.72-1.66-.64-7.52-6.76-12.75-9.57-19.64a12.6,12.6,0,0,1-1-7.14c.38-2.55.51-5.1.64-7.52,0-2-1.28-3.83-3.19-1.91-6.63,6.63-11,1.66-15.43-2.68-2.42-2.3-4.72-4.08-8.42-3.19-6,1.53-12,2.68-18,4.34-5.48,1.53-9.82.64-11.73-5.36-1.28-4.21-4-4.46-6.63-2.17-12.5,11.1-29.84,14.92-41.58,27.42-1.79,2-4.34,3.19-6.89,1.79s-2.17-3.83-1.91-6.25c.26-2.68,1.4-7.14-.64-7.78-6-1.53-8.8-8.29-15.31-8.55v-2.55c14.92-17.86,32.14-32.52,53.06-43,15.56-7.78,32-12.5,48.59-17.22A31.62,31.62,0,0,0,337.06,406a147.82,147.82,0,0,0,20.28-63.13c1.79-22.83,6.76-44.89,12.88-66.7a12.38,12.38,0,0,1,5.1-7c10.33-7.52,13.77-6.25,15.94,6,.51,3.06,1.66,6.38,5.74,4.72,8-3.19,16.45-5.74,24-9.57,6.76-3.32,11.86-4.34,18,.38,4.34,3.32,7.4,2.17,10.08-2.93s2-10.84,4-15.94c5.1-13.52,6.63-13.9,18.75-6.76,3.83,2.3,5.61,4.72,4.08,9.31-.77,2.17-2.68,5.23.77,6.76,4,1.66,7.91,5.1,12.5,2.81,10.71-5.36,11.48-8.29,4-17.35-4.08-4.85-4.85-8.67,0-13h3.83a21.93,21.93,0,0,1,5.1,4.59c11,15.31,19.64,32.14,36.48,42.85,7.65,4.85,13,13.14,19.13,20.15,8.16,9.31,17.22,18.37,18.24,31.89v2.55c-9.31.38-18.49,2.17-27.93,1.66-3.44-.13-6.38.64-7.4,4.59-3.06,12.75-13.65,20.41-21.43,29.84-5,6-5.23,10.08,2.42,12.5,3.06,1,4.21,2.55,4.59,5.23a78.72,78.72,0,0,1,.89,9.44,7.08,7.08,0,0,1-3.7,6.89c-8.42,5.1-9.82,11.86-4.34,20a7.55,7.55,0,0,1,1.79,5.87c-1.15,8.29,3.19,15.31,6.38,22.32,2.93,6.38,3.57,10.46-1.79,14.92-2.68,2.17-3.57,4.34-1,6.89,4.46,4.34,6.38,9.95,9.18,15.18a7.29,7.29,0,0,0,4.34,4.34c5.74,1.91,5.74,5.48,2.55,9.69-1.53,2-3.32,3.83-4.72,6-3.06,4.46-8.16,6.25-12.24,4.46C518,513,509.88,513,509,504.3c-.38-4.21-2.55-4.85-6.12-3.32a110,110,0,0,1-19.9,6.5,9.32,9.32,0,0,0-6.63,5.48c-1.53,3.32-1.4,7.91-6.5,8.42-5.74.64-6.5-4.34-8.55-7.78-.89-1.4-1.53-2.93-2.42-4.46-1.66-3.19-2.81-6.25.26-9.18,1.53-1.53.38-2.81-.77-2.68-7,1-6.5-5.36-8.42-8.8-2.3-4.34-5.1-3.83-8.42-2.42-1.28.51-1.91,2.42.13,2.68,7.78,1,4.59,5.87,3.83,9.95-.89,4.72-6,6.89-7.4,11.61,8,0,8,0,6.5,7.52a4.83,4.83,0,0,0,0,1.91c1.79,9.31,2.81,18.49-7.27,24.23A6.58,6.58,0,0,0,435.53,545.88Z"
},{
    name: '莲州镇',
    center: {x: '247.29', y: '142.71'},
    polyline: "M366.65,0H373c17,8,24,22.45,25.76,40.3.13.89.26,1.66.38,2.55.51,5.61,3.32,6.63,8.67,5.36,6-1.53,12.12-6.25,18.75-1.4a2.13,2.13,0,0,0,2.81-.89c3.06-3.83,8.67-5.74,8.8-11.86,0-2,1.79-3.44,3.57-4.21,3.83-1.66,5.23-4.46,5.1-8.55-.13-3.44-1-8.29,3.32-9.31s9.82-5.36,13.14,2.17c.51,1.28,2.3,1,3.44,1C480,14.54,493,15,505.55,19.9c5.74,2.17,10.2.64,13.52-5.61C523.27,6.38,535.14,4,541,9.69c4.21,4.08,7.27,9.31,10.71,14.16a2.43,2.43,0,0,1,.13,2.3c-5.61,5.61-2.42,11.73-.77,17.35,7.65,25.76,17.47,51,22.06,77.67V139c-3.19,8-6.63,16.07-9.69,24.23-2.68,7.27-5.61,14.16-11,19.9a66.92,66.92,0,0,0-12.12,18.62c-6.89,14.92-12.88,30-9.06,47.19,1.66,7.65,1.91,15.56,2.68,23.34.13,2.17,1.28,5.36-1.28,6.38s-4.46-1.79-6.12-3.7c-8.67-9.95-15.94-20.92-23.34-31.89a30.81,30.81,0,0,0-3.44-4.59c-1.4-1.4-3.19-2.3-5.1-.64s-2.81,3.32-1.28,5.61,2.93,4.08,4.46,6.12c5.74,7.65,5.61,7.52-1.91,12.88-1.53,1.15-2.93,2.55-4.34,3.7-4.72,4-8.8,0-13-1.15-3.19-.89-4.72-3.57-3.7-6.38,2.81-8.67-3.57-10.84-9.18-13.77-3.06-1.66-5.1-1.28-6.63,1.91-2,4.34-4.08,8.67-4.46,13.77-1,14.54-6.5,17.47-19.39,10.84-2.17-1.15-4.21-2-6.63-.64-3.83,2.42-8.42,2.81-12.37,4.59-6.12,2.68-12.88,4.34-17.86,9.18h-3.83a16.4,16.4,0,0,1-4.08-7.78c-1.66-8.42-2.93-16.71-1.4-25.51a94,94,0,0,0,1-21.55,382.12,382.12,0,0,1-.51-48.34c.51-11.22-.64-23.21,8-32.65,2-2.17.51-3.44-2-4.46-6.38-2.81-3.19-8.8-3.57-13.39-.38-4,2.93-4.72,6.12-4.72,3.83,0,5.23-2.17,5.1-5.74-.13-2.81,0-5.48-.13-8.29,0-2.42-1.15-4.34-3.7-4.34-4.85-.13-6.38-3.32-7.52-7.14s-2.81-8-4.34-12c-2.55-6.38-6-11.61-13.77-12.37-2.55-.26-5.1-2.17-7.14-3.83C359.77,66.7,353.13,60.71,346.5,55c-2.93-2.55-4.72-5.36-4.34-9.44.26-3.7-1-6.38-4.85-7.14V18c1.53-1.15,3.57-1.53,4.46-3.44,2.93-5.87,8.93-7.4,14.28-8C361,5.87,364.36,4.21,366.65,0Z"
}]

function getMousePos(event) {
    var e = event || window.event;
    return {'x':e.clientX,'y':e.clientY}
}

class Overview extends Component {
    constructor(props) {
        super(props)
        this.state = {
            current: null,
            showTip: false
        }
    }
    mouseOver(event,i) {
        let pos = getMousePos(event)
        this.setState({current: i,showTip:true,x:pos.x+50,y:pos.y-50})
    }
    mouseOut() {
        this.setState({current: null,showTip:false})
    }
    mouseMove(event) {
        let pos = getMousePos(event)
        this.setState({x:pos.x+50,y:pos.y-50})
    }
    handleClick(i) {
        this.props.setPlatformLoading()
        this.props.history.push('/platform')
        this.props.clickCity(i)
    }
    mouseOverTip() {
        this.setState({showTip: true})
    }
    render() {
        return (
            <div style={{minHeight: document.documentElement.clientHeight - 162}} className={styles.container}>
                <div className={styles.survey}></div>
                <div classNmae={styles.svgContainer} style={{
                    margin: '0 auto',
                    width: 715,
                    height: 785,
                    position: 'relative'
                }}>
                    {
                        this.state.showTip ?
                        <div style={{
                            height: 100,width:100,backgroundColor:'green',position:'fixed',
                            left:this.state.x,top:this.state.y}}
                            ></div> : null
                    }
                    <svg style={{
                        width: 715,
                        height: 785,
                        display: 'block',
                    }}>
                        {
                            data.map((d,i) => 
                                <path key={i} d={d.polyline} stroke="#ccc" strokeWidth="2" transform="translate(-208 0.5)"
                                    fill={this.state.current === i ? '#00a6f3' : 'white'}
                                    onMouseOver={(e) => this.mouseOver(e,i)}
                                    onMouseOut={() => this.mouseOut()}
                                    onMouseMove={(e) => this.mouseMove(e)}
                                    onClick={() => this.handleClick(data[i].name)}
                                    style={{cursor: 'pointer'}}
                                />
                            )
                        }
                        {
                            data.map((d,i) =>
                                <text key={i} x={d.center.x} y={d.center.y} style={{cursor: 'pointer'}}
                                    fill={this.state.current === i ? 'white' : '#777'}
                                    onMouseOver={(e) => this.mouseOver(e,i)}
                                    onMouseMove={(e) => this.mouseMove(e)}
                                    onClick={() => this.handleClick(data[i].name)}
                                >{d.name}</text>
                            )
                        }
                    </svg>
                    
                    
                </div>
            </div>
        )
    }
}

function mapStateToProps(state) {
    return {...state}
}

function mapDispatchToProps(dispatch) {
    return bindActionCreators(actions,dispatch)
}

export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Overview))